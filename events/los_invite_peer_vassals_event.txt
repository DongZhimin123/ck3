namespace = los_invite_peer_vassals_event

# 邀请同僚事件 0001~0002
los_invite_peer_vassals_event.0001 = {
    hidden = yes


    immediate = {
        if = {
            limit = {
                scope:los_guest.location = scope:los_host.capital_province
            }

            scope:los_guest = {
                current_travel_plan ?= {
                    delay_travel_plan = { days = 30 }
                }
            }

            scope:los_host = {
                trigger_event = los_invite_peer_vassals_event.0002
            }
        }
    }
}

# 大驾光临
los_invite_peer_vassals_event.0002 = {
    type = character_event
    title = los_invite_peer_vassals_event.0002.t
    theme = court

    immediate = {
        scope:los_host = {
            set_variable = {
                name = los_recipient_grade
                value = 0
            }

            if = {
                limit = {
                    domicile ?= {
                        has_domicile_building_or_higher = reception_hall_01
                    }
                }
                change_variable = {
                    name = los_recipient_grade
                    add = 1
                }
            }
        }

    }

    desc = {
        desc = los_invite_peer_vassals_event.0002.d_0

        triggered_desc = {
            trigger = { scope:los_host.var:los_recipient_grade = 1 }
            desc = los_invite_peer_vassals_event.0002.d_1
        }

        triggered_desc = {
            trigger = { scope:los_host.var:los_recipient_grade = 2 }
            desc = los_invite_peer_vassals_event.0002.d_2
        }

    }

    left_portrait = {
        character = scope:los_host
        animation = personality_honorable
    }

    right_portrait = {
        character = scope:los_host.cp:councillor_chancellor
        animation = thinking
    }

    option = {
        name = los_invite_peer_vassals_event.0002.o_1
        trigger_event = los_invite_peer_vassals_event.0003
    }

    after = {
        scope:los_host = {
            remove_variable = los_recipient_grade
        }
    }
}

# 洗尘接风
los_invite_peer_vassals_event.0003 = {
    type = character_event
    title = los_invite_peer_vassals_event.0003.t
    theme = friend_relation

    override_background = {
        reference = garden
    }

    immediate = {}

    desc = {
        desc = los_invite_peer_vassals_event.0003.d_0
    }

    left_portrait = {
        character = scope:los_host
        animation = happiness
    }

    right_portrait = {
        character = scope:los_guest
        animation = happiness
    }

    lower_right_portrait = {
        character = scope:los_guest.primary_spouse
    }

    option = {
        name = los_invite_peer_vassals_event.0003.o_1
        # trigger_event = los_invite_peer_vassals_event.0003
    }
}